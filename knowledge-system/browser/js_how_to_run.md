# js如何执行

1. 生成抽象语法树（AST）和执行上下文
    1. 分词（tokenize），又称为词法分析。将源码拆解成一个个 token。
    2. 解析（parse），又称为语法分析。将 token 转换成 AST。
    3. 根据 AST 生成执行上下文。
2. 生成字节码。解释器 Ignition 根据 AST 生成字节码，并解释执行字节码。
    * 字节码就是介于 AST 和机器码之间的一种代码。但是与特定类型的机器码无关，字节码需要通过解释器将其转换为机器码后才能执行。使用字节码可以减少系统的内存使用。一开始 V8 并没有字节码，而是直接将 AST 转换为机器码。随着浏览器在手机上的广泛普及，内存占用问题也暴露出来。
3. 执行代码。如果有一段第一次执行的字节码，解释器 Ignition 会逐条解释执行。到了这里，相信你已经发现了，解释器 Ignition 除了负责生成字节码之外，它还有另外一个作用，就是解释执行字节码。在 Ignition 执行字节码的过程中，如果发现有热点代码（HotSpot），比如一段代码被重复执行多次，这种就称为热点代码，那么后台的编译器 TurboFan 就会把该段热点的字节码编译为高效的机器码，然后当再次执行这段被优化的代码时，只需要执行编译后的机器码就可以了，这样就大大提升了代码的执行效率。字节码配合解释器和编译器，被称为即时编译（JIT）。
