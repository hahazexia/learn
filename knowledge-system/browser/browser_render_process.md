# 渲染流程

渲染流水线由下面几个阶段组成：

1. 构建 DOM 树
2. 样式计算
3. 布局阶段
4. 分层
5. 绘制
6. 分块
7. 光栅化
8. 合成

## 详细

1. 构建 DOM 树。将 html 解析为浏览器能够理解的结构内存中的 DOM 树。

2. 样式计算（Recalculate Style）。计算出 DOM 节点中每个元素的具体样式。
    1. 将 css 转换为浏览器可以认识的 styleSheets。
    2. 转换样式表中的属性值，使其标准化
    3. 计算出 DOM 树中每个节点的具体样式。（CSS 的继承规则和层叠规则）每个 DOM 节点的样式被保存在 ComputedStyle 的结构内。

3. 布局阶段。计算出 DOM 树中可见元素的几何位置。
    1. 创建布局树。构建一棵只包含可见元素布局树。遍历 DOM 树中的所有可见节点，并把这些节点加到布局树中，而不可见的节点会被布局树忽略掉。
    2. 布局计算。计算布局树节点的坐标位置。

4. 